<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <script src="https://unpkg.com/htmx.org@2.0.4"
        integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+" crossorigin="anonymous">
    </script>
</head>

<body>
    <div id="chat-container">
        <h2>Welcome, {{ request.user.username }}!</h2>

        <!-- Logout Button -->
        <button hx-post="{% url 'logout_view' %}" hx-target="#chat-container" hx-swap="outerHTML">
            Logout
        </button>

        <h3>Users:</h3>
        <ul id="user-list">
            {% for user in users %}
            <li hx-get="{% url 'fetch_chat_history' user.id %}" hx-target="#chat-messages" hx-swap="innerHTML">
                {{ user.username }}
            </li>
            {% endfor %}
        </ul>

        <h3>Messages:</h3>
        <div id="chat-messages">
            <p>Select a user to view messages.</p>
        </div>

        <!-- Loading Indicator -->
        <div id="loading" class="htmx-indicator" style="display: none;">
            Loading...
        </div>
</body>

</html>